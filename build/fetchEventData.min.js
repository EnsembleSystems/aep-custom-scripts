return(async()=>{var c=class{constructor(t,e,n){this.debug=t,this.prefix=e,this.isTestMode=n}log(t,e){this.debug&&console.log(`${this.prefix} ${t}`,e??"")}error(t,e){console.error(`${this.prefix} ${t}`,e??"")}warn(t,e){console.warn(`${this.prefix} ${t}`,e??"")}testHeader(t,e){if(!this.isTestMode)return;const n="=".repeat(80);console.debug(n),console.debug(t),console.debug(n),e!==void 0&&(console.debug(e),console.debug(n))}testResult(t){if(!this.isTestMode)return;const e="=".repeat(80);console.debug(e),console.debug("RESULT:"),console.debug(e),console.debug(typeof t=="string"?t:JSON.stringify(t,null,2)),console.debug(e)}testInfo(t,e){this.isTestMode&&(e!==void 0?console.debug(t,e):console.debug(t))}};function u(t,e,n){const r=n?`[${e} Test]`:`[AEP ${e}]`;return new c(t,r,n)}var a=5*1024*1024;function l(t,e,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n);return fetch(t,{...e,signal:r.signal}).finally(()=>{clearTimeout(o)})}function d(t){const e=t.headers.get("content-length");if(e&&parseInt(e,10)>a)throw new Error(`Response too large: ${e} bytes (max: ${a})`)}function f(t){return t instanceof Error&&t.name==="AbortError"}function g(t){return t instanceof TypeError&&t.message.includes("fetch")}function E(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch{return null}}var T={EVENT_ENDPOINT:"/api/event.json?meta=true"},h={ATTENDEE:"attendeaseMember"};async function b(t,e){const r=`${window.location.origin}${T.EVENT_ENDPOINT}`;e.log("Fetching event data from",r);const o=await l(r,{method:"GET",headers:{Accept:"application/json"}},t.timeout);if(!o.ok)throw e.error(`API error: ${o.status} ${o.statusText}`),new Error(`API returned ${o.status}`);d(o);const s=await o.json();return e.log("Event data received",s),s}function p(t){const e=E(h.ATTENDEE);return e?(t.log("Found attendee data",e),e):(t.log("No attendee data in localStorage"),null)}async function i(t=!1){const e={timeout:1e4,debug:t},n=u(e.debug,"Event Data",t);try{n.testHeader("EVENT DATA EXTRACTOR - TEST MODE");const r=await b(e,n),o=p(n),s={eventData:r,attendeeData:o};return n.testResult(s),t||n.log("Returning combined data",s),s}catch(r){return f(r)?(n.error(`Request timeout after ${e.timeout}ms`),null):g(r)?(n.error("Network error:",r),null):(n.error("Unexpected error fetching event data:",r),null)}}return await i(!1)})();
