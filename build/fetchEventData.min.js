return(async()=>{var i=class{constructor(e,t){this.debug=e,this.prefix=t}log(e,t){this.debug&&console.log(`${this.prefix} ${e}`,t??"")}error(e,t){console.error(`${this.prefix} ${e}`,t??"")}warn(e,t){console.warn(`${this.prefix} ${e}`,t??"")}};function l(e,t,n){const r=n?`[${t} Test]`:`[AEP ${t}]`;return new i(e,r)}var s=5*1024*1024;function u(e,t,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n);return fetch(e,{...t,signal:r.signal}).finally(()=>{clearTimeout(o)})}function E(e){const t=e.headers.get("content-length");if(t&&parseInt(t,10)>s)throw new Error(`Response too large: ${t} bytes (max: ${s})`)}function f(e){return e instanceof Error&&e.name==="AbortError"}function g(e){return e instanceof TypeError&&e.message.includes("fetch")}function T(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}var d={EVENT_ENDPOINT:"/api/event.json?meta=true"},h={ATTENDEE:"attendeaseMember"};async function p(e,t){const r=`${window.location.origin}${d.EVENT_ENDPOINT}`;t.log("Fetching event data from",r);const o=await u(r,{method:"GET",headers:{Accept:"application/json"}},e.timeout);if(!o.ok)throw t.error(`API error: ${o.status} ${o.statusText}`),new Error(`API returned ${o.status}`);E(o);const a=await o.json();return t.log("Event data received",a),a}function m(e){const t=T(h.ATTENDEE);return t?(e.log("Found attendee data",t),t):(e.log("No attendee data in localStorage"),null)}async function c(e=!1){const t={timeout:1e4,debug:e},n=l(t.debug,"Event Data",e);try{e&&(console.log("=".repeat(80)),console.log("EVENT DATA EXTRACTOR - TEST MODE"),console.log("=".repeat(80)));const r=await p(t,n),o=m(n),a={eventData:r,attendeeData:o};return e?(console.log("=".repeat(80)),console.log("RESULT:"),console.log("=".repeat(80)),console.log(JSON.stringify(a,null,2)),console.log("=".repeat(80))):n.log("Returning combined data",a),a}catch(r){return f(r)?(n.error(`Request timeout after ${t.timeout}ms`),null):g(r)?(n.error("Network error:",r),null):(n.error("Unexpected error fetching event data:",r),null)}}return await c(!1)})();
