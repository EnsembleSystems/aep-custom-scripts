var result = (async () => {
  const u = false;
  var l = Object.defineProperty;
  var f = Object.defineProperties;
  var g = Object.getOwnPropertyDescriptors;
  var s = Object.getOwnPropertySymbols;
  var p = Object.prototype.hasOwnProperty;
  var d = Object.prototype.propertyIsEnumerable;
  var i = (t, e, r) => e in t ? l(t, e, { enumerable: true, configurable: true, writable: true, value: r }) : t[e] = r;
  var E = (t, e) => {
    for (var r in e || (e = {}))
      if (p.call(e, r))
        i(t, r, e[r]);
    if (s)
      for (var r of s(e)) {
        if (d.call(e, r))
          i(t, r, e[r]);
      }
    return t;
  };
  var h = (t, e) => f(t, g(e));
  var v = class {
    constructor(t, e, r) {
      this.debug = t;
      this.prefix = e;
      this.isTestMode = r;
    }
    log(t, e) {
      if (this.debug) {
        console.log(`${this.prefix} ${t}`, e != null ? e : "");
      }
    }
    error(t, e) {
      console.error(`${this.prefix} ${t}`, e != null ? e : "");
    }
    warn(t, e) {
      console.warn(`${this.prefix} ${t}`, e != null ? e : "");
    }
    /**
     * Prints a test mode header with separator lines
     * Only outputs if testMode is enabled
     */
    testHeader(t, e) {
      if (!this.isTestMode) {
        return;
      }
      const r = "=".repeat(80);
      console.debug(r);
      console.debug(t);
      console.debug(r);
      if (e !== void 0) {
        console.debug(e);
        console.debug(r);
      }
    }
    /**
     * Prints test mode result output with separator lines
     * Only outputs if testMode is enabled
     */
    testResult(t) {
      if (!this.isTestMode) {
        return;
      }
      const e = "=".repeat(80);
      console.debug(e);
      console.debug("RESULT:");
      console.debug(e);
      if (typeof t === "string") {
        console.debug(t);
      } else {
        console.debug(JSON.stringify(t, null, 2));
      }
      console.debug(e);
    }
    /**
     * Prints additional test mode info
     * Only outputs if testMode is enabled
     */
    testInfo(t, e) {
      if (!this.isTestMode) {
        return;
      }
      if (e !== void 0) {
        console.debug(t, e);
      } else {
        console.debug(t);
      }
    }
  };
  function b(t, e, r) {
    const o = r ? `[${e} Test]` : `[AEP ${e}]`;
    return new v(t, o, r);
  }
  var a = 5 * 1024 * 1024;
  function w(t, e, r) {
    const o = new AbortController();
    const n = setTimeout(() => o.abort(), r);
    return fetch(t, h(E({}, e), { signal: o.signal })).finally(() => {
      clearTimeout(n);
    });
  }
  function T(t) {
    const e = t.headers.get("content-length");
    if (e && parseInt(e, 10) > a) {
      throw new Error(
        `Response too large: ${e} bytes (max: ${a})`
      );
    }
  }
  function _(t) {
    return t instanceof Error && t.name === "AbortError";
  }
  function m(t) {
    return t instanceof TypeError && t.message.includes("fetch");
  }
  var O = {
    EVENT_ENDPOINT: "/api/event.json?meta=true"
  };
  async function P(t, e) {
    const r = window.location.origin;
    const o = `${r}${O.EVENT_ENDPOINT}`;
    e.log("Fetching event data from", o);
    const n = await w(
      o,
      {
        method: "GET",
        headers: {
          Accept: "application/json"
        }
      },
      t.timeout
    );
    if (!n.ok) {
      e.error(`API error: ${n.status} ${n.statusText}`);
      throw new Error(`API returned ${n.status}`);
    }
    T(n);
    const c = await n.json();
    e.log("Event data received", c);
    return c;
  }
  async function y(t = false) {
    const e = {
      timeout: 1e4,
      debug: t
    };
    const r = b(e.debug, "Event Data", t);
    try {
      r.testHeader("EVENT DATA EXTRACTOR - TEST MODE");
      const o = await P(e, r);
      r.testResult(o);
      if (!t) {
        r.log("Returning event data", o);
      }
      return o;
    } catch (o) {
      if (_(o)) {
        r.error(`Request timeout after ${e.timeout}ms`);
        return null;
      }
      if (m(o)) {
        r.error("Network error:", o);
        return null;
      }
      r.error("Unexpected error fetching event data:", o);
      return null;
    }
  }
  return await y(u);
})();
return result;
