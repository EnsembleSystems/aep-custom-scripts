return(async()=>{var u=class{constructor(e,r,t){this.debug=e,this.prefix=r,this.isTestMode=t}log(e,r){this.debug&&console.log(`${this.prefix} ${e}`,r??"")}error(e,r){console.error(`${this.prefix} ${e}`,r??"")}warn(e,r){console.warn(`${this.prefix} ${e}`,r??"")}testHeader(e,r){if(!this.isTestMode)return;const t="=".repeat(80);console.debug(t),console.debug(e),console.debug(t),r!==void 0&&(console.debug(r),console.debug(t))}testResult(e){if(!this.isTestMode)return;const r="=".repeat(80);console.debug(r),console.debug("RESULT:"),console.debug(r),console.debug(typeof e=="string"?e:JSON.stringify(e,null,2)),console.debug(r)}testInfo(e,r){this.isTestMode&&(r!==void 0?console.debug(e,r):console.debug(e))}};function c(e,r,t){const s=t?`[${r} Test]`:`[AEP ${r}]`;return new u(e,s,t)}function f(e){if(!e||typeof e!="string")return!1;const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,t=/^[a-z0-9]{15}([a-z0-9]{3})?$/i;return r.test(e)||t.test(e)}function g(e,r){const t={EMPTY:0,PUBLISHER:1,APP_TYPE:2,ID:3,NAME:4},s=4,n=e.split("/");if(n.length>=s&&n[t.PUBLISHER]==="publisher"){const o=n[t.ID];if(o&&f(o))return o;r.log("Invalid publisher ID format",o)}return null}async function l(e=!1){const t=c({debug:e}.debug,"Publisher ID DOM",e);try{t.testHeader("PUBLISHER ID FETCHER (DOM) - TEST MODE"),t.log("Searching for publisher links in DOM");const s=document.querySelectorAll('a[href^="/publisher/"]');t.log(`Found ${s.length} publisher links`);for(let n=0;n<s.length;n+=1){const o=s[n].getAttribute("href");if(o){const i=g(o,t);if(i)return t.log("Found valid publisher ID",i),t.testResult(`Publisher ID: ${i}`),i}}return t.log("No valid publisher link found in DOM"),t.testResult("null (no publisher link found)"),null}catch(s){return t.error("Unexpected error parsing publisher ID:",s),null}}return await l(!1)})();
